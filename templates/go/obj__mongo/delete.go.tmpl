{{ $object := .Object }}func Delete(ctx context.Context, db *mongo.Database, id primitive.ObjectID) error {
    coll := db.Collection(CollectionName)
    _, err := coll.DeleteOne(ctx, bson.M{"_id": id})
    if err != nil {
        return err
    }
    {{ range ListChildRefFields $object }}
    {{ DeleteChildRef $object . }}
    {{- end }}
    return nil
}

func DeleteBulk(ctx context.Context, db *mongo.Database, ids []primitive.ObjectID) error {
    coll := db.Collection(CollectionName)
    _, err := coll.DeleteMany(ctx, bson.M{"_id": bson.M{"$in": ids}})
    if err != nil {
        return err
    }
    {{ range ListChildRefFields $object }}
    {{ DeleteManyChildRef $object . }}
    {{- end }}
    return nil
}

{{ range ListParentRefFields $object }}{{ $rootType := GetFieldRootType . }}
func DeleteBy{{ . | GetFieldRootType | UCC }}(ctx context.Context, db *mongo.Database, {{ .Name }} primitive.ObjectID) error {
    coll := db.Collection(CollectionName)
    _, err := coll.DeleteMany(ctx, bson.M{"{{ .Name }}": {{ .Name }}})
    if err != nil {
        return err
    }
    return nil
}

func DeleteByMany{{ . | GetFieldRootType | UCC }}s(ctx context.Context, db *mongo.Database, {{ .Name }} []primitive.ObjectID) error {
    coll := db.Collection(CollectionName)
    _, err := coll.DeleteMany(ctx, bson.M{"{{ .Name }}": bson.M{"$in": {{ .Name }}}})
    if err != nil {
        return err
    }
    return nil
}

{{- end }}
